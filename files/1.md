你好！ 

大家好！


StuPlus
软件（结构）设计说明























西北工业大学326伐木累小组
目录
1. 引言	3
1.1. 标识	3
1.2. 系统概述	3
1.3. 文档概述	4
1.4. 基线	4
2. 引用文件	4
3. 设计决策	4
4. 体系结构设计	5
4.1. 体系结构	5
4.1.1. 程序(模块)划分	5
4.2. 全局数据结构说明	10
4.2.1. 常量	10
4.2.2. 变量	11
4.2.3. 数据结构	11
4.3. 数据库设计	13
4.4. CSCI部件	13
4.5. 接口设计	14
4.5.1. 外部接口	14
4.5.2. 内部接口	15
5. CSCI详细设计	18
5.1. 功能	18
5.2. 性能	28
5.3. 输入项目	29
5.4. 输出项目	29
6. 注解	29

1.引言
1.1.标识
本系统是Beta 1.0版本。
1.2.系统概述
我们小组此次的项目“StuPlus”是一款以GPS定位技术、移动计算、云计算、大数据等为支撑技术，基于时间分析和轨迹分析的位置服务，为学生提供学习、运动、社交等校园生活服务的应用。通过记录实时位置描绘运动轨迹并且记录运动步数以及查看好友位置方便好友联系。可以查看和安排学习计划，查看和发布校园动态生活、学习动态、运动动态，讨论热门话题，查看基于位置的运动和学习的排行榜、好友PK、周报，查看学习时长，查看健康数据，推送运动知识、学习培训等消息以及提供基于轨迹的好友亲密度分析、智能好友推荐等功能。
1.3文档概述
本文档描述了计算机软件配置项的设计。它描述了CSCI级设计决策、CSCI体系结构设计(概要设计)和实现该软件所需的详细设计。SDD可用《接口设计说明》(IDD)和《数据库(顶层)设计说明》(DBDD)加以补充。
1.4基线
《StuPlus可行性分析报告》
《StuPlus软件开发计划》
2.引用文件
《StuPlus软件需求说明书》
《StuPlus软件开发计划》
3.设计决策
StuPlus根据功能的不同可划分为四个子模块，分别是个人信息模块、运动信息模块、学习模块、发现模块。
1.个人信息模块：
个人信息模块是StuPlus的基础模块，它提供了记录用户的位置信息和轨迹信息的功能。在此模块中，用户可以查看到自己的实时位置信息、历史轨迹信息、运动或学习的记录、好友列表、好友实时位置等数据。通过这个模块所提供的“量化自我”功能，学生可以从数据的角度来更科学地了解自己。
2.运动模块：
运动模块为用户提供了记录运动信息、与好友PK等功能。StuPlus会记录用户的步数、移动距离等信息，并在每天结束的时候提供其他好友的运动信息以及一份排行榜，以此鼓励学生多锻炼。
3.学习模块：
学习模块会为用户记录他们花费在学习上的时间，软件会将学校中的教学楼、图书馆的位置加以标记，当用户处在这些位置的时候就为他们记录学习时间，并同样提供其他好友的学习时间信息和排行榜，以此鼓励学生自习。
4.发现模块：
发现模块是StuPlus中最有特色的一个模块。通过学生的实时位置，StuPlus可以为用户提供他们附近有趣的地点。例如备受好评的餐馆、有趣的小店、适合散步的公园等等。基于用户的运动轨迹，StuPlus还可以提供的好友的亲密度分析、智能好友推荐等多种多样的功能。
4.体系结构设计
4.1.体系结构
4.1.1程序(模块)划分
StuPlus所提供的服务分为四个模块，分别是个人信息模块、运动信息模块、学习模块、发现模块。
用户系统HIPO图

运动信息系统(模块)HIPO图
 
学习信息系统(模块)HIPO图

位置信息系统(我的模块)HIPO图

推荐系统(模块)HIPO图

4.2.全局数据结构说明
4.2.1.常量
1)用户：用户名字；性别；学号；用户昵称；密码；联系方式；好友关系；
2)学习数据：学习地点；开始学习的时间；结束学习的时间；学习时间；
3)运动数据：运动地点；开始运动的时间；结束运动的时间；运动时间
4)校园活动：活动名称；活动描述；活动时间；活动地点；活动举办方；参与人群；
5)运动知识：话题名称；话题类型；话题简介话题内容；话题提供方。
4.2.2.变量
1)登录所需的密码；
2)手对屏幕的点击；
3)用户的输入；
4)用户位置信息；
5)用户动态
4.2.3.数据结构
用户          =用户名字	
              +性别
              +学号
              +用户昵称
              +密码
              +联系方式
              +动态
              +好友关系
              +位置
              +学习数据
              +运动数据
时间=*发表动态的具体时间，格式是HH:mm:ss  MM-DD-YYYY*
位置          =经度
              	+纬度
经度=*用户所处位置的经度，格式是；小于等于180°*
纬度=*用户所处位置的纬度，格式是；小于等于90°*

好友关系      =好友姓名	
              	+好友位置
              	+距离
距离=*好友与我的直线距离，由数字组成，单位为KM*

学习数据      =学习地点
    	          +开始学习的时间
       	       +结束学习的时间
           	   +学习时间
学习地点=*[诚子楼|西馆|毅字楼|图书馆]*
开始学习时间=*进入学习地点的时间*
结束学习的时间=*从学习地点出来的时间*
学习时间=*在学习地点学习的时间，值为结束学习的时间减去开始学习的时间*
运动数据      =运动地点
    	          +开始运动的时间
       	       +结束运动的时间
           	   +运动时间
运动地点=*[操场|游泳馆|羽毛球场|篮球馆]*
开始运动时间=*进入运动地点的时间*
结束运动的时间=*从运动地点出来的时间*
运动时间=*在运动地点运动的时间，值为结束运动的时间减去开始运动的时	间*
校园活动      =活动名称
    	          +活动描述
       	       +活动时间
           	   +活动地点
              	+活动举办方
              	+参与人群
活动名称=*由不超过50个字符组成*
活动描述=*关于活动内容规则等的文本或图片描述*
活动时间=*举办活动的开始时间*
活动地点=*举办活动的地点*
活动举办方=*活动主办方的名称*	
参与人群=*被允许参加活动的人群的文本描述*
运动知识      =话题名称
    	          +话题类型
       	       +话题简介
           	   +话题内容
              	+话题提供方
话题名称=*由不超过50个字符组成*
话题类型=*[篮球|足球]羽毛球|运动常识]*
话题简介=*对话题的简单描述*
话题提供方=*提供这个知识的人的名称*
4.3.数据库设计
见《StuPlus 数据库(顶层)设计说明》。
4.4.CSCI部件
个人信息模块调用：
1)我的足迹模块；
2)设置模块；
3)添加好友模块；
4)好友列表模块。
好友列表模块调用：
1)好友位置模块；
2)好友详细信息模块。
运动模块调用：
1)运动信息统计模块；
2)运动知识模块；
3)运动排行榜模块。
学习模块调用：
1)学习信息统计模块；
2)好友PK模块。
好友PK模块调用：
1)学习排行榜模块；
2)好友详细信息模块。
4.3.接口设计
4.3.1.外部接口
1.用户界面
按Windows应用软件用户界面的规范来设计，使用以页面为主的用户界面，便于用户使用。
1）发现界面采用竖排列表的布局，最上侧为动态发布按钮，点击，即可进入动态发布页面。
2）当学生用户浏览别的用户的页面时，主页的布局采用多面板的布局形式，将主页的内容分类置于页面左部,将主页内容，即主体部分置于页面中部及右侧。
3）运动界面采用竖排列表的布局，将运动信息生成一张表格，内容包括用户自身的运动信息和其好友的运动信息，以及可供选择的时间选项（多重下拉菜单）。
4）登陆界面采用流式布局的界面。呈现的内容包括账号、密码、验证码以及确认登陆按钮。
5）注册界面与预约界面一样采用竖排列表的形式，将所有要填的信息一次展开，并附有提交按钮。
6）用户界面字体分辨率320px*640px；行距为1.4em；文字会设置成两端对齐，且一个窄列的长度不应当超过39个字符。
2.软件接口
1）系统数据库：用于储存所有用户的个人信息与所有的通讯记录和交易记录（在确认无错误记录的情况下，系统会定时清除过期记录）
2）操作系统：安卓端暂时只支持Android4.2版本以上 ，IOS版本正在研发中。
3.通信接口
1）网络通信标准或协议：客户端和服务器端的通信遵循TCP/IP协议。
2）通信安全或加密问题：采用中等级别的加密算法保证用户的通信安全。
4.3.2.内部接口
本节列举了服务器提供给客户端的所有API以及它们的输入输出数据格式、使用方式等等信息。
1.注册
接口地址：http://www.example.com/auth/register
请求方法：POST
请求头部参数：无
URL参数：无
请求体描述：
参数名	类型	必填	描述	默认值
userName	String	是	用户想注册的账户名	无
password	String	是	注册账户的密码	无
phone	String	是	用户手机号	无
email	String	是	用户的注册邮箱	无

2.上传实时位置
接口地址：http://www.example.com/locate/upload
请求方法：POST
请求头部参数：
参数名	类型	必填	描述	默认值
authToken	String	是	用于身份验证的令牌	无

URL参数：无
请求体描述(JSON格式)：
参数名	类型	必填	描述	默认值
time	String	是	记录该位置信息的时间	无
longitude	Double	是	经度	无
latitude	Double	是	纬度	无

3.历史轨迹(模块)信息
接口地址：http://www.example.com/locate/history
请求方法：GET
请求头部参数:
参数名	类型	必填	描述	默认值
authToken	String	是	用于身份验证的令牌	无

URL参数：
参数名	类型	必填	描述	默认值
开始时间	String	否	查询历史记录的开始时间	空
结束时间	String	否	查询历史记录的结束	空

请求体描述(JSON格式)：无
4.运动历史记录
接口地址：http://www.example.com/sports/history
请求方法：GET
请求头部参数：
参数名	类型	必填	描述	默认值
authToken	String	是	用于身份验证的令牌	无

URL参数：
参数名	类型	必填	描述	默认值
开始时间	String	否	查询历史记录的开始时间	空
结束时间	String	否	查询历史记录的结束	空
请求体描述(JSON格式)：无
5.运动时间排行榜
接口地址：http://www.example.com/sports/rank
请求方法：POST
请求头部参数：
参数名	类型	必填	描述	默认值
authToken	String	是	用于身份验证的令牌	无

URL参数：无
请求体描述(JSON格式)：无
6.学习历史记录
接口地址：http://www.example.com/study/history
请求方法：GET
请求头部参数：
参数名	类型	必填	描述	默认值
authToken	String	是	用于身份验证的令牌	无

URL参数：
参数名	类型	必填	描述	默认值
开始时间	String	否	查询历史记录的开始时间	空
结束时间	String	否	查询历史记录的结束	空

请求体描述(JSON格式)：无
7.校园活动推荐
接口地址：http://www.example.com/recommend/activity
请求方法：GET
请求头部参数：
参数名	类型	必填	描述	默认值
authToken	String	是	用于身份验证的令牌	无

URL参数：无
请求体描述(JSON格式)：无

5.CSCI详细设计
5.1.功能
我的主页
用户进入平台注册登录后即可进入我的主页，可以查看个人的各项数据分析以及我的足迹，好友位置以及设置功能。


我的主页下的我的足迹。在此功能下可以查看自己的当前位置以及回放历史位置轨迹，查看具体时间点下的位置。


我的主页下的好友位置。在此功能下可以看见好友目前的位置，点击好友头像可以看见好友的详细资料，方便联系好友。
                  

我的主页下的校园地图。此功能下可以查看老校区和新校区的地图。
                

我的主页下的设置。右上角设置点击进入可以查看个人信息，好友亲密度，运动和学习周报，通讯录以及摇一摇功能和退出登录。


设置下的好友亲密度。在此功能下可以查看与每位好友的亲密度以及亲密度排名情况，并且可以分享给好友。


设置下的运动学习周报。在此功能下可以查看本周到目前为止以及历史每一周运动和学习的总时间，平均时间，达标天数以及在好友中的排名。
                   

设置下的通讯录可以查看所有好友，以及新好友消息验证和新朋友查找、添加，可能认识的人推荐功能。
                   

学习主页
进入学习主页可以查看本周学习计划分布，学习时间记录，好友PK，学习排行榜以及培训，并且可以添加本周学习计划，点击学习动态可出现动态详情。
                

学习主页下的时间记录。此功能可查看当前数据与预期数据以及他们之间在折线图上的对比。也可以查看历史的学习数据。


学习主页下排行榜。此功能可以查看自己和好友的学习时间以及所有好友学习时间的排名榜，并且可以为好友点赞以及分享给好友。


学习主页下的好友PK。在此功能下可以查看当天以及历史每一天的学霸学习时间，学渣学习时间，好友平均学习时间以及自己的学习时间与这三个时间的对比。


运动主页
此功能下可以查看当前天气以及温度和今天到目前为止所走的步数。还有健康数据，好友PK，排行榜以及运动知识等。


运动主页下的健康数据。在此功能下可以查看今天到目前为止以及历史每一天的空气指数，运动步数，运动时长，消耗热量以及我的荣誉。


运动主页下排行榜。此功能可以查看自己和好友的运动时间以及所有好友运动时间的排名榜，并且可以为好友点赞以及分享给好友。


运动主页下的好友PK。在此功能下可以查看当天以及历史每一天的运动达人运动时间，宅男宅女运动时间，好友平均运动时间以及自己的运动时间与这三个时间的对比。


运动主页下的运动知识。在此功能下可以查看网球知识，健康知识，足球知识和篮球知识，如图所示的网球知识：
                     

发现主页
在此功能下可以查看关于健身、网球、跑步、足球、篮球、健走的热门话题以及校园动态生活。

5.2.性能
1.空间占用：
安卓程序安装前安装包大小不大于200M，解压安装后对于安卓系统的磁盘空间占用量不超过500M。
2.资源占用：
在80%的用户使用时间内，对于ARM处理器的率不超过30%，对于RAM的占用量不超过10M。
3.功耗：
后台运行状态下，本程序对于安卓系统的耗电量平均每天不超过20%，数据流量使用量不超过20M/周。
4.安全性能：
1)学生在第一次登录后，必须设置他的手机号码、电子邮箱，作作为找回密码、交易验证等敏感操作的验证工具。
2)学生在修改密码、修改找回密码问题与回答时，系统应向用户发送短信验证码或电子邮件验证码，来确保操作的安全性。
3)让学生用户选择密码找回问题，并要求其设置对应的密码找回问题的答案。
4)服务器保存所有用户发布的动态记录，以供用户可以查询自己和他人先前发布的动态。
5)灵活性：页面响应绝大部分的操作。
6)时间特性：响应点击屏幕的时间在0.5~1秒之间。
5.3.输入项目
输入的数据是户执行的各种操作，包括点击屏幕、摇晃手机等操作。
5.4.输出项目
输出是从数据库中读取的数据，或错误警告信息。
注解
CSCI：计算机软件配置项
相关技术介绍：
1.基于轨迹的校园生活服务
在校园生活中，移动互联网模式的发展趋势，为校园师生的学习、生活带来极大的便利。为师生创建校园生活轨迹内容并允许他们获取当前用户所在地理位置的坐标信息。用户还可以浏览生活轨迹列表，如果记录的生活轨迹内容保存着当前地理位置信息，浏览时便以地图的方式展示，否则以文本形式显示。
2.基于位置服务（LBS）
基于位置的服务，是指通过电信移动运营商的无线电通讯网络或外部定位方式，获取移动终端用户的位置信息，在GIS平台的支持下，为用户提供相应服务的一种增值业务。
它包括两层含义：首先是确定移动设备或用户所在的地理位置；其次是提供与位置相关的各类信息服务。意指与定位相关的各类服务系统，简称"定位服务"，称为"移动定位服务"系统。如找到手机用户的当前地理位置，然后在上海市6340平方公里范围内寻找手机用户当前位置处1公里范围内的宾馆、影院、图书馆、加油站等的名称和地址。所以LBS就是要借助互联网或无线网络，在固定用户或移动用户之间，完成定位和服务两大功能。
3.GPS
GPS定位是指利用全球导航系统，通过接收卫星信号GSM无线网络来适时确定地面位置，并将GPS确定的地面位置传递到一些专业的定位平台。它是GPS技术应用中的一项常用功能，结合了GPS技术、无线通信技术、图像处理技术及GIS技术的定位技术，中心端采用固定IP接入，用来接收和处理GPS终端通过移动网络提交上来的各种数据，如终端当前位置信息，终端的各种警报信息，同时处理客户端提交上来的各种查询请求。
4.云计算
云计算（cloud computing）是基于互联网的相关服务的增加、使用和交付模式，这种模式提供可用的、便捷的、按需的网络访问，进入可配置的计算资源共享池（资源包括网络，服务器，存储，应用软件，服务），这些资源能够被快速提供，只需投入很少的管理工作，或与服务供应商进行很少的交互。通常涉及通过互联网来提供动态易扩展且经常是虚拟化的资源。云是网络、互联网的一种比喻说法。过去在图中往往用云来表示电信网，后来也用来表示互联网和底层基础设施的抽象。因此，云计算甚至可以让你体验每秒10万亿次的运算能力，拥有这么强大的计算能力可以模拟核爆炸、预测气候变化和市场发展趋势。用户通过电脑、笔记本、手机等方式接入数据中心，按自己的需求进行运算。
